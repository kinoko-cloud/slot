{# === å…±é€šJS: ãƒ¢ãƒ¼ãƒ‰å‹•çš„åˆ‡æ›¿ + ç¾åœ¨æ™‚åˆ»è¡¨ç¤º ===
   å…¨ãƒšãƒ¼ã‚¸ã®scriptãƒ–ãƒ­ãƒƒã‚¯æœ«å°¾ã«include
#}
/* === å…±é€š: å‹•çš„ãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ + ç¾åœ¨æ™‚åˆ» === */
(function() {
    function getJST() {
        var now = new Date();
        return new Date(now.getTime() + (now.getTimezoneOffset() + 540) * 60000);
    }
    function getDisplayMode() {
        var jst = getJST();
        var h = jst.getHours(), m = jst.getMinutes();
        if (h < 10) return 'before_open';
        if (h >= 23 || (h === 22 && m >= 50)) return 'after_close';
        return 'realtime';
    }
    function updateModeBadge() {
        var mode = getDisplayMode();
        var badge = document.querySelector('.mode-badge');
        if (!badge) return;
        badge.className = 'mode-badge';
        if (mode === 'before_open') {
            badge.classList.add('before-open');
            badge.textContent = 'ğŸŒ™ å–¶æ¥­å‰';
        } else if (mode === 'after_close') {
            badge.classList.add('after-close');
            badge.textContent = 'ğŸ”’ é–‰åº—å¾Œ';
        } else {
            badge.classList.add('realtime');
            badge.textContent = 'ğŸŸ¢ å–¶æ¥­ä¸­';
        }
    }
    function updateCurrentTime() {
        var jst = getJST();
        var hh = String(jst.getHours()).padStart(2, '0');
        var mi = String(jst.getMinutes()).padStart(2, '0');
        var el = document.getElementById('current-time');
        if (el) el.textContent = hh + ':' + mi;
    }
    updateModeBadge();
    updateCurrentTime();
    setInterval(function() {
        updateModeBadge();
        updateCurrentTime();
    }, 60000);
})();
